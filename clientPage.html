<!doctype html>
<html ng-app>
  <head>
    <script src="/socket.io/socket.io.js"></script>
	<script type='text/javascript' src='knockout-2.1.0.js'></script>
  </head>

  
  <body>
  	<p>Agent status: <strong data-bind="text: agentStatus"></strong></p>
	<div>
		<!-- button type="button" onClick=$resource('http://127.0.0.1:1337/run')">Run now</button -->		
		<button type="button" onClick="runNow()">Run now</button>				
	</div>
  </body>

  
  <script>
	//var agentStatus = "unknown";
	var socket = io.connect('http://localhost:1337');
	socket.on('helloClient', function (serverObject) {
		alert('got helloClient message with payload: ' + serverObject.payload);
	});
	
	// Create some observables, and bind them to the page (all with knockout.js).
	var myViewModel = {
		agentStatus: ko.observable('unknown here...')
	} 
	ko.applyBindings(myViewModel); 
					
	function runNow() { 
		myViewModel.agentStatus('Run request sent');
		socket.emit('runNow', { runParams: 'no special params' });
	};
  </script>
</html>